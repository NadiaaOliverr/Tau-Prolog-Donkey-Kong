<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<title>Donkey Kong - SIN 323</title>
	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="shortcut icon" href="img/icon.png">
	<script src="../src/tau-prolog.js"></script>
</head>

<body class="background">
	<audio id="start" src="sound/GameStart.mp3"></audio>
	<audio id="jump" src="sound/jump.mpeg"></audio>
	<audio id="win" src="sound/win.mp3"></audio>
	<audio id="loser" src="sound/loser.mp3"></audio>
	<h1><img src="img/logo.png" alt="" width="300"></h1>

	<div class="menu">
		<button id="generateMap" type="button" class="btn btn-outline-light">Gerar Mapa</button>
		<button id="generatePath" type="button" class="btn btn-outline-light">Gerar Caminho</button>
	</div>
	<div class="container">
		<div id="container" class="col-md-10">
			<div id="edge">
				<div class="table">
					<table id="table">
						<img class=" position rounded float-right" width="200" src="img/monkey.png" alt="">
					</table>
				</div>
			</div>
		</div>
	</div>

	<div class="footer">
		<p>Desenvolvido por Genilton e Nádia copyright © 2019</p>	
	</div>

	<script id="prolog.pl" type="text/prolog" src="prolog.pl">
		:-use_module(library(lists)). 
		
		consecutiveObstaclesRight([X,Y],Obstacles):- 
		Yone is Y + 1, 
		member([X,Y],Obstacles),
		member([X,Yone],Obstacles).
	
		consecutiveObstaclesLeft([X,Y],Obstacles):- 
			Yone is Y - 1, 
			member([X,Y],Obstacles),
			member([X,Yone],Obstacles).
		
		canGoLeft([X,Y], _, Obstacles) :- Y>0, \+(consecutiveObstaclesLeft([X,Y],Obstacles)).
		canGoright([X,Y], _, Obstacles):- Y<9, \+(consecutiveObstaclesRight([X,Y],Obstacles)).
		canGoDown([X,Y], Ladder, _) :- member( [X,Y], Ladder), X>0.
		canGoUp([X,Y], Ladder, _)   :- member( [X,Y], Ladder), X<4.
		
		% Para direita
		next([X,Y], _, Obstacles, [X,Yout]):- canGoright([X,Y], _, Obstacles), Yout is Y + 1. 
		
		% Para esquerda
		next([X,Y], _, Obstacles, [X,Yout]):- canGoLeft([X,Y], _, Obstacles), Yout is Y - 1. 
		
		% Para Baixo
		next([X,Y], Ladder, _, [Xout,Y]):- canGoDown([X,Y], Ladder, _), Xout is X - 1. 
		
		% Para Cima
		next([X,Y], Ladder, _, [Xout,Y]):- canGoUp([X,Y], Ladder, _), Xout is X + 1. 
		
		
		
		solution_bl(Initial, Ladder, Obstacles, Goal, Solution) :- bl([[Initial]], Ladder, Obstacles, Goal, Solution). 		
		
		bl([[State|Path]|_], _, _, Goal, [State|Path]) :- Goal==State. 
		
		bl([First|Others], Ladder, Obstacles, Goal, Solution) :- 
			extend(First, Successors, Ladder, Obstacles), append(Others, Successors, NewFrontier), 
			bl(NewFrontier, Ladder, Obstacles, Goal, Solution).
		
		extend( [State|Path], ListSuccessors, Ladder, Obstacles) :- 
			bagof(  [Sucessor, State|Path], 
					( next(State, Ladder, Obstacles, Sucessor), 
					\+( member(Sucessor,[State|Path]) )), 
					ListSuccessors ), !. extend( _ ,[], _,_).
		
		main(InitialState, Ladder, Obstacles, Hammer, Goal, Solution) :- 
			solution_bl(InitialState, Ladder, Obstacles, Hammer, PathHammer),
			solution_bl(Hammer, Ladder, Obstacles, Goal, PathGoal),
			append( PathGoal, PathHammer, Solution).
	</script>

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="bundle.js"></script>
</body>

</html>