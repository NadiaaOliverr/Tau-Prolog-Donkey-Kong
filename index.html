<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">
	<title>Donkey Kong - SIN 323</title>
	<link rel="stylesheet" href="src/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="shortcut icon" href="img/icon.png">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="src/tau-prolog.js"></script>
</head>

<body class="fundo">
	<h1><img src="img/logo.png" alt="" width="300"></h1>

	<div class="menu">
		<button id="generateMap" type="button" class="btn btn-outline-light">Gerar Mapa</button>
		<button id="generatePath" type="button" class="btn btn-outline-light">Gerar Caminho</button>
		<button type="button" class="btn btn-outline-light" data-toggle="modal"
			data-target="#myModal">Instruções</button>

		<!-- Modal -->
		<div class="modal" id="myModal">
			<div class="modal-dialog">
				<div class="modal-content">

					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">Instruções</h4>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<!-- Modal body -->
					<div class="modal-body">
						Siga os passos abaixo para ajudar o Mário a salvar a princesa: <br>
						1 - Execute o programa xxx.pl dentro da pasta xxx <br>
						2 - Agora é só clicar em gerar caminho e ver a mágica acontecer
						3 - Caso não consiga executar, observe se você baixou todos
						os pré requisitos do sistema.
					</div>

					<!-- Modal footer -->
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>
	<div class="container">
		<div id="container" class="col-md-10">
			<table id="table">
				<img class=" position rounded float-right" width="200" src="img/monkey.png" alt="">
			</table>
			<p id="footer">Desenvolvido por Genilton e Nádia copyright © 2019</p>
		</div>
	</div>

	<script id="prolog.pl" type="text/prolog">
		:-use_module(library(lists)).
		
		pertence(E, [E|_]).
		pertence(E, [_|T]):- pertence(E, T).

		insere(E, [], [E]):- !.
		insere(E, List, [E|List]):- !.

		inverte([],[]).
		inverte([E|C], Linv):-
			inverte(C,C_Inv),
			concatena(C_Inv,[E], Linv).

		concatena([],L,L).
		concatena([H|T],L2,[H|T2]) :- concatena(T,L2,T2).

		sucessao([X,Y], Escadas, [X,Yout]):- Y<9, Yout is Y + 1.
		sucessao([X,Y], Escadas, [X,Yout]):- Y>0, Yout is Y - 1.
		sucessao([X,Y], Escadas, [Xout,Y]):- X>0, Xout is X - 1.
		sucessao([X,Y], Escadas, [Xout,Y]):- pertence( [X,Y], Escadas), X<4, Xout is X + 1.

		solucao_bl(Inicial, Escadas, Meta, Solucao) :- bl([[Inicial]], Escadas, Meta, Solucao).

		bl([[Estado|Caminho]|_], Escadas, Meta, [Estado|Caminho]) :- Meta == Estado.

		bl([Primeiro|Outros], Escadas, Meta, Solucao) :- estende(Primeiro, Sucessores, Escadas),
			concatena(Outros, Sucessores, NovaFronteira),
			bl(NovaFronteira, Escadas, Meta, Solucao). 

		estende( [Estado|Caminho], ListaSucessores, Escadas) :- 
			bagof( 
				[Sucessor, Estado|Caminho], 
				( sucessao(Estado, Escadas, Sucessor), \+( pertence(Sucessor,[Estado|Caminho]) )),
				ListaSucessores
				), !.
		estende( _ ,[], Escadas). 

		main(EstadoInicial, Escadas, Meta, Solucao) :- solucao_bl(EstadoInicial, Escadas, Meta, Solucao).
	</script>

	<script src="src/main.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>

</html>